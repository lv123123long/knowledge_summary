# TCP
TCP（Transmission Control Protocol，传输控制协议）是互联网协议套件中的一个重要协议，用于在网络中可靠地传输数据。TCP通过三次握手建立连接，并通过四次挥手断开连接。此外，TCP还使用序列号和确认应答号来确保数据的可靠传输。下面详细介绍这些概念及其作用


## 三次握手

三次握手是TCP建立连接的过程，确保双方都能发送和接收数据，并且双方都知道对方已经准备好进行通信

SYN 同步序列编号 
* 客户端向服务器发送一个带有SYN标志位的TCP段，表示请求建立连接
* 客户端选择一个初始序列号seq=x 并发送给服务器

SYN-ACK（同步序列编号-确定应答）
* 服务器收到SYN请求后，会回复一个带有SYN和 ACK标志位的TCP段
* 服务器选择自己的初始序列号seq=y ，并确认客户端的序列号为ack=x+1 （即客户端下一个期待收到的序列号）

ACK应答
* 客户端收到服务器的 SYN-ACK 后，发送一个带有ACK的标志位的TCP给服务器
* 客户端确定服务器的序列号为 ack=y + 1 (即服务器下一个期待收到的序列号)
* 此时双方连接建立完成，双方开始数据传输


序列号和确认应答号的作用
序列号（Sequence Number, seq）：每个TCP段都有一个序列号，表示该段在传输的数据流中的位置。序列号帮助接收方重组数据包，并检测丢失或重复的数据包。
确认应答号（Acknowledgment Number, ack）：接收方在接收到数据后，会返回一个确认应答号，表示它期望接收的下一个序列号。这有助于发送方知道哪些数据已被成功接收。


## 四次挥手

FIN 终止连接
* 主动关闭方（）发送一个带有FIN标志位的TCP段，表示希望断开连接
* 发送方发送一个序列号seq=u


ACK应答
* 被动关闭的一方收到FIN后，发送一个带有ACK标志位的TCP段 作为响应
* 接收方确定序列号为 ack=u+1

FIN 终止连接
* 被动关闭方发送一个带有FIN标志位的TCP段。表示自己也准备断开连接
* 发送方选择一个序列号seq=w

ACK应答
- 主动关闭方收到被动关闭方的 `FIN` 后，发送一个带有 `ACK` 标志位的TCP段作为响应。
- 接收方确认序列号为 `ack=w+1`。
- 被动关闭方收到最后一个 `ACK` 后，连接正式关闭。

序列号和确认应答号的作用
序列号（Sequence Number, seq）：在四次挥手中，序列号仍然用于标识发送的TCP段的位置，以确保正确处理数据。
确认应答号（Acknowledgment Number, ack）：确认应答号用于通知对端已经成功接收到数据，并告知对端期望接收的下一个序列号。